id: swarm
description: |
  A blueprint deploying an all-in-one Docker Swarm cluster entity.

  Deploys on pre-configured VMs using the configured location details.

location:
  byon:
    displayName: swarm-byon
    loginUser: docker
    user: docker
    privateKeyFile: ~/.ssh/swarm.pem
    loginUser.privateKeyFile: ~/.ssh/swarm.pem
    hosts:
      - 10.10.101.0/25

services:
  - type: docker-swarm
    id: swarm
    name: "swarm"
    brooklyn.config:
      start.timeout: 30m
      swarm.initial.size: 5
      swarm.max.size: 10
      swarm.manager.size: 3
      etcd.initial.size: 3
      swarm.port: 4000
      swarm.defaultnetwork: "swarm"
      swarm.scaling.cpu.limit: 0.99
      swarm.recovery.stabilizationDelay: 10s
      swarm.recovery.failOnRecurringFailuresInThisDuration: 5m
